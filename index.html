<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>English Bloom — Rahul</title>
<style>
:root{--primary:#2c7a7b;--muted:#666}
body{font-family:Arial,Helvetica,sans-serif;background:#f4f7f8;margin:0;color:#222}
header{background:var(--primary);color:#fff;padding:18px;text-align:center}
header a{color:#fff;text-decoration:underline}
.wrap{max-width:900px;margin:18px auto;padding:14px}
.card{background:#fff;padding:14px;border-radius:8px;box-shadow:0 1px 4px rgba(0,0,0,.08);margin-bottom:14px}
.row{display:flex;gap:10px;flex-wrap:wrap}
input[type="text"], input[type="password"], select{width:100%;padding:8px;margin:6px 0;border:1px solid #ddd;border-radius:6px;box-sizing:border-box}
button{background:var(--primary);color:#fff;border:none;padding:8px 12px;border-radius:6px;cursor:pointer}
button.secondary{background:#555}
h2,h3{margin:6px 0 12px}
ul{padding-left:18px}
.hidden{display:none}
.quiz-question{padding:8px;border-bottom:1px solid #f0f0f0}
.result.correct{color:green;font-weight:700}
.result.incorrect{color:red;font-weight:700}
footer{background:#1f2937;color:#fff;text-align:center;padding:12px;margin-top:10px}
.small{font-size:13px;color:var(--muted)}
.note{background:#fff7df;border-left:4px solid #ffb020;padding:8px;margin-bottom:10px}
</style>
</head>
<body>

<header>
<div style="font-size:20px">ENGLISH BLOOM</div>
<div class="small">Created & Powered by <strong>Rahul</strong> — <a href="https://www.facebook.com/yourfb" target="_blank">My Facebook</a></div>
</header>

<div class="wrap">

  <!-- LOGIN CARD -->
  <div class="card" id="loginCard">
    <h2>Login</h2>
    <div style="max-width:480px;margin:auto">
      <input id="username" placeholder="Username (Rahul / student)" type="text">
      <input id="password" placeholder="Password" type="password">
      <div style="display:flex;gap:8px;margin-top:8px">
        <button onclick="performLogin('student')">Student Login</button>
        <button onclick="performLogin('admin')" class="secondary">Admin Login</button>
      </div>
      <p class="small">Default: Rahul / rahul123  — student / student123</p>
    </div>
  </div>

  <!-- ADMIN PANEL -->
  <div class="card hidden" id="adminPanel">
    <h2>Admin Panel</h2>
    <div class="note">Add / Delete users and manage quizzes. Quizzes data is loaded from <code>quizzes.js</code>.</div>

    <h3>Add Student User</h3>
    <input id="newUser" placeholder="New username">
    <input id="newPass" placeholder="New password">
    <div style="display:flex;gap:8px">
      <button onclick="addUser()">Add User</button>
      <button onclick="logout()">Logout</button>
    </div>

    <h3 style="margin-top:12px">Existing Students</h3>
    <ul id="userList"></ul>

    <h3 style="margin-top:12px">Quizzes</h3>
    <p class="small">Total categories and counts (from quizzes.js):</p>
    <ul id="quizList"></ul>

    <div style="margin-top:12px">
      <h3>Add New Quiz Question (admin)</h3>
      <input id="newQuestionText" placeholder="Question text">
      <input id="newQuestionAnswer" placeholder="Answer">
      <select id="newQuestionCategory">
        <option value="Changing Sentences">Changing Sentences</option>
        <option value="Tag Questions">Tag Questions</option>
      </select>
      <div style="margin-top:8px"><button onclick="addQuizQuestion()">Add Quiz Question</button></div>
    </div>

    <div style="margin-top:14px">
      <h3>Gemini AI English Helper</h3>
      <input id="aiQuestion" placeholder="Ask anything">
      <div style="margin-top:8px">
        <button onclick="askGemini()">Ask AI</button>
      </div>
      <p id="aiAnswer" class="small"></p>
    </div>
  </div>

  <!-- STUDENT QUIZ AREA -->
  <div class="card hidden" id="studentPanel">
    <h2 id="greeting">Welcome</h2>
    <p class="small">Click Start Quiz to load randomized questions (answers are checked by typing and pressing Check Answer).</p>
    <div style="display:flex;gap:8px">
      <button onclick="startQuiz()">Start Quiz</button>
      <button onclick="logout()" class="secondary">Logout</button>
    </div>

    <div id="quizArea" style="margin-top:12px"></div>
    <p id="score" class="small"></p>
  </div>

</div>

<footer>
  © 2025 Rahul | All Rights Reserved
</footer>

<!-- ==================== -->
<!-- Load quiz data file -->
<script src="quizzes.js"></script>

<!-- Main JS -->
<script>
const users = [
  {username:'Rahul', password:'rahul123', type:'admin'},   // only admin
  {username:'student', password:'student123', type:'student'}
];
// all other JS functions same as previous
// Gemini API integration
async function askGemini(){
  const question = document.getElementById('aiQuestion').value.trim();
  if(!question){ alert("Type a question!"); return; }
  document.getElementById('aiAnswer').textContent="Thinking...";

  const API_KEY = "AIzaSyAdmyTR2AzXsbTV4NUbB72YDcOozB0XhtU"; // ✅ Your key

  try {
    const response = await fetch(
      "https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent",
      {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "x-goog-api-key": API_KEY
        },
        body: JSON.stringify({
          contents: [{ parts: [{ text: question }] }]
        })
      }
    );
    const data = await response.json();
    const answer = data?.candidates?.[0]?.content?.[0]?.text || "No response";
    document.getElementById('aiAnswer').textContent = answer;
  } catch(err) {
    console.error(err);
    document.getElementById('aiAnswer').textContent = "Error calling Gemini API";
  }
}
</script>

</body>
  </html>
